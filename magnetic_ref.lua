remove("/home/gadokrisztian/work/adze-modeler/femm_data.csv")
newdocument(0)
file_out = openfile("/home/gadokrisztian/work/adze-modeler/femm_data.csv", "w")
mi_probdef(0,'inches','axi',1e-08, 1, 30, 0)
mi_addnode(1.0, -0.5)
mi_addnode(1.0, 0.5)
mi_addnode(2.0, -0.5)
mi_addnode(2.0, 0.5)
mi_addsegment(1.0, -0.5, 1.0, 0.5)
mi_addsegment(1.0, 0.5, 2.0, 0.5)
mi_addsegment(2.0, 0.5, 2.0, -0.5)
mi_addsegment(2.0, -0.5, 1.0, -0.5)
mi_addnode(0, -4.0)
mi_addnode(0, 4.0)
mi_addsegment(0, -4.0, 0, 4.0)
mi_addarc(0.0, -4.0, 0.0, 4.0, 180, 5)
mi_addcircprop("icoil",1,1)
mi_addblocklabel(1.5, 0)
mi_addblocklabel(3.0, 0)
mi_addmaterial('coil', 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0)
mi_addmaterial('air', 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0)
mi_addboundprop('abc', 0, 0, 0, 0, 0, 0, 7832428.301766503, 0, 2, 0, 0)
mi_selectlabel(1.5, 0)
mi_setblockprop('coil', 0, 0.2, 'icoil', 0, 0, 100)
mi_clearselected()
mi_selectlabel(3.0, 0)
mi_setblockprop('air', 0, 0.04, '<None>', 0, 0, 0)
mi_clearselected()
mi_selectarcsegment(4.0, 0)
mi_setarcsegmentprop(5, 'abc', 0, 0)
mi_saveas("/home/gadokrisztian/work/adze-modeler/test.fem")
mi_analyze(1)
mi_loadsolution()
current, volt, flux = mo_getcircuitproperties('icoil')
write(file_out, 'current', ', ', current, "\n")
write(file_out, 'volt', ', ', volt, "\n")
write(file_out, 'flux', ', ', flux, "\n")
closefile(file_out)
mo_close()
mi_close()
quit()
